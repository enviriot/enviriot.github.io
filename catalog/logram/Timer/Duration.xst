<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<xst path='/$YS/TYPES/LoBlock/Timer' m='{"attr":65}'>
  <i n='Duration' s='{"cctor":{"LoBlock":"Timer/Duration"},"Children":{"In":{"ddr":-1,"default":false,"manifest":{"attr":69},"rc":"X1"},"timeout":{"default":30000,"manifest":{"attr":69}},"Out":{"default":0,"ddr":1,"manifest":{"attr":65},"rc":"X9"}},"default":"","hint":"pulse duration","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABPUlEQVQ4T43TPSjuYRjH8Y/X9Sx2SRkO20nRmVDKpBRJUkZFiUFhOWeQsjiTl0EmHVIWqbOwWNTZnMFgUVYMVjq6cv/1dHueh//07/5d9/f+XW81Kn+jmfS7XGhNFcD/TCsbWw3Qhq8J8g/Xn3XwHb/wLbtwgUXMYRXnoecOhrGHM6wgLsXXjSX04g49uMwBrelwB9Pp4jyesZ4e28QYOnCTA0IMcjueEuAw/RcdacQVTopHSlMI4layXqSfA+L8BybQkjsIq2Fvv6R45QDj2EV9DrhPhdooAXQh5qEoZkizWEZTDjhGHQaqDFdIp3jEYA7oxx8M4agCZCSl2JdA7+Yg7E+mYdku6UYDprCGOJ8pHsgHqRY/sYAH/E2BnfiSOhRdeNuTSrvQjJjKmIkIjl04wG2eWrVl+qCWr/IL06g+EUQEf8YAAAAASUVORK5CYII=","manifest":{"attr":66,"type":"LoBlock/Timer/Duration"},"namePrefix":"A","src":"class Duration{\r\n  constructor(){ \r\n    this.tm = null;\r\n    this.on = null;\r\n  }\r\n  Calculate(pin){\r\n    if(pin==\"In\"){\r\n      if(this.GetState(\"In\")){\r\n        this.on = (new Date()).getTime();\r\n        if(this.tm != null){\r\n          clearInterval(this.tm); \r\n        }\r\n      } else {\r\n        this.SetState(\"Out\", ((new Date()).getTime() - this.on)/1000.0);\r\n        let to = this.GetState(\"timeout\");\r\n        if(to&gt;0){\r\n\t  setTimeout(this.Timeout.bind(this), to);\r\n\t}\r\n      }\r\n    }\r\n  }\r\n  Timeout(){\r\n    this.SetState(\"Out\", 0);\r\n  }\r\n}","willful":true}' m='{"attr":69,"type":"Ext/LBDescr"}' ver='0.4.1808.27002' />
</xst>