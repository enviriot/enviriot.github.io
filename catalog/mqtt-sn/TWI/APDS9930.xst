<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<xst path='/$YS/TYPES/TWI'>
  <i n='APDS9930' s='{"Children":{},"default":0,"editor":"Enum","enum":"TwiStatus","manifest":{"MQTT-SN":{"tag":"---"},"type":"TWI/APDS9930"},"mi":{"TWI":{"attr":1}},"src":"class APDS9930{\r\n  constructor(){\r\n    setTimeout(this.Init.bind(this), 500*(1+Math.random()));\r\n  }\r\n  Init(){\r\n    this.TwiReq([0x39, 0x00, 0x01, 0x01, 0xA0 | 0x12])\t\t// Read chipID\r\n      .then(this.Init0.bind(this), this.RespE.bind(this));\r\n  }\r\n  Init0(buf){\r\n    if(buf[4]==0x39){\r\n      this.TwiReq([0x39, 0x00, 0x10, 0x00, 0xA0 | 0x00, \r\n        0x00, 0xED, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x32, 0x00, 0x12, 0x00, 0x08, 0xA0]);\r\n      this.TwiReq([0x39, 0x00, 0x02, 0x00, 0xA0 | 0x00, 0x25])\r\n      setTimeout(this.Read.bind(this),10);\r\n    } else {\r\n      this.SetState(null,0);\r\n      setTimeout(this.Init.bind(this), 90000*(1+Math.random()));\r\n    }\r\n  }\r\n  Read(){\r\n    this.TwiReq([0x39, 0x00, 0x01, 0x00, 0xE5]);\r\n    this.TwiReq([0x39, 0x00, 0x01, 0x02, 0xA0 | 0x18]).then(this.Resp.bind(this), this.RespE.bind(this));\r\n  }\r\n  Resp(buf){\r\n    this.SetState(null,1);\r\n    this.SetState(\"Prox\", buf[4] | (buf[5]&lt;&lt;8));\r\n    setTimeout(this.Read.bind(this), 1000);\r\n  }\r\n  RespE(e){\r\n    this.SetState(null,0);\r\n    setTimeout(this.Init.bind(this), 60000*(1+Math.random()));\r\n  }\r\n}"}' m='{"attr":69,"type":"Ext/TwiDev"}' ver='0.4.1810.11002' />
</xst>